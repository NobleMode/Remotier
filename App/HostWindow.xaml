<Window x:Class="Remotier.HostWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Hosting Session" Height="450" Width="600"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        Loaded="Window_Loaded" Closing="Window_Closing">
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,15">
            <TextBlock Text="HOSTING SESSION" FontSize="20" FontWeight="Bold" Foreground="{StaticResource AccentBrush}" HorizontalAlignment="Center"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                 <TextBlock Text="IP Address: " VerticalAlignment="Center" Foreground="#AAAAAA"/>
                 <TextBlock x:Name="IpText" Text="127.0.0.1" VerticalAlignment="Center" FontWeight="Bold" Margin="5,0,10,0"/>
                 <Button Content="Copy" Click="CopyIp_Click" Padding="5,2" FontSize="10" Height="20"/>
            </StackPanel>
            <TextBlock x:Name="TimerText" Text="00:00:00" HorizontalAlignment="Center" Margin="0,5,0,0" Foreground="#888888"/>
        </StackPanel>

        <!-- Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Settings -->
            <StackPanel Grid.Column="0">
                <TextBlock Text="SESSION SETTINGS"  FontWeight="Bold" Margin="0,0,0,10" Foreground="{StaticResource AccentBrush}"/>
                
                <TextBlock Text="Performance Preset" Margin="0,5,0,2"/>
                <ComboBox x:Name="PresetCombo" SelectionChanged="PresetCombo_SelectionChanged">
                    <ComboBoxItem Content="Speed (Low Latency)" Tag="Speed"/>
                    <ComboBoxItem Content="Balanced (Default)" Tag="Balanced" IsSelected="True"/>
                    <ComboBoxItem Content="Quality (High Res)" Tag="Quality"/>
                    <ComboBoxItem Content="Custom" Tag="Custom"/>
                </ComboBox>

                <TextBlock Text="Monitor Source" Margin="0,5,0,2"/>
                <ComboBox x:Name="MonitorCombo" SelectionChanged="MonitorCombo_SelectionChanged"/>

                <TextBlock Text="Target FPS" Margin="0,10,0,2"/>
                <ComboBox x:Name="FpsCombo" SelectionChanged="FpsCombo_SelectionChanged">
                    <ComboBoxItem Content="30 FPS" Tag="30"/>
                    <ComboBoxItem Content="60 FPS" Tag="60" IsSelected="True"/>
                    <ComboBoxItem Content="120 FPS" Tag="120"/>
                </ComboBox>

                <TextBlock Text="Quality (JPEG)" Margin="0,10,0,2"/>
                <Slider x:Name="QualitySlider" Minimum="1" Maximum="100" Value="75" TickFrequency="10" IsSnapToTickEnabled="True" ValueChanged="QualitySlider_ValueChanged"/>
                <TextBlock Text="{Binding Value, ElementName=QualitySlider, StringFormat={}{0}%}" HorizontalAlignment="Right" Foreground="#888888"/>
            </StackPanel>

            <!-- Clients -->
            <StackPanel Grid.Column="2">
                <TextBlock Text="CONNECTED CLIENTS" FontWeight="Bold" Margin="0,0,0,10" Foreground="{StaticResource AccentBrush}"/>
                <ListView x:Name="ClientList" Height="150" Background="{StaticResource SurfaceBrush}" BorderThickness="0" Foreground="White">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding}"/>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
                <TextBlock x:Name="StatusText" Text="Waiting for connections..." Margin="0,10,0,0" FontStyle="Italic" Foreground="#AAAAAA" TextWrapping="Wrap"/>
            </StackPanel>
        </Grid>

        <!-- Footer -->
        <Button Grid.Row="2" Content="Stop Hosting" Background="#CC3333" Height="35" Margin="0,15,0,0" Click="Stop_Click"/>
    </Grid>
</Window>
